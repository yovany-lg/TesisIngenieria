\chapter{Conclusiones}
\label{sec5:Conclusiones}

El presente trabajo de investigación describe el diseño y desarrollo realizados para construir un prototipo de sistema de monitoreo para la planta de tratamiento de aguas residuales de la Universidad Tecnológica de la Mixteca. A través de la verificación y validación se comprobó el funcionamiento de dicho sistema.

Este proyecto tiene como finalidad contribuir a la implantación de mejores prácticas en la realización de proyectos de monitoreo y automatización remota, y por ende, dar pauta a futuros proyectos de innovación tecnológica e industrial, ya que estas prácticas se pueden aplicar a proyectos de automatización de procesos y plantas industriales.

Debido a la magnitud del proyecto, se aplicaron dos metodologías de desarrollo, la metodología \emph{CMMI} se emplea para la gestión global del proyecto, ya que dicha metodología se emplea generalmente en proyectos de \emph{software} de gran escala. La metodología de \emph{Sistemas Empotrados} se emplea para la división del proyecto en elementos \emph{hardware} y \emph{software} para la RTU y la MTU.

Al finalizar el sistema de monitoreo se han cumplido con los objetivos establecidos en el inicio de este proyecto, y se obtienen las siguientes conclusiones:

\begin{itemize}
	\item El sistema de monitoreo consta de los siguientes elementos \emph{hardware}: acondicionamiento de sensores (Dispositivos CAS), una RTU basada en el MCU ATmega8 y una interfaz de comunicación serial basada en el estándar RS-485. Los elementos \emph{software} del sistema de monitoreo son: \emph{software} de la RTU, \emph{software} de la MTU y una aplicación Web.
	
	\item Se diseñaron e implementaron dispositivos CAS para cada sensor. Los dispositivos CAS para el sensor de pH y temperatura se dividen en tres etapas: aislamiento, filtrado y amplificación. Las etapas del dispositivo CAS para el sensor de OD son: conversión de corriente a voltaje, amplificación y filtrado. Las etapas de filtrado son una técnica de reducción de ruido, ya que las señales que entregan dichos sensores pueden ser afectadas y por consiguiente las lecturas también.
	
	\item Debido a que el sensor de pH tiene como salida una señal de voltaje con valores que oscilan de $-414.12\milli\volt$ a $414.12\milli\volt$, fue necesario incluir una etapa de adición de un voltaje \emph{offset} (${V}_{offset}$) previa a la etapa de aislamiento, con ello, el dispositivo ADC del MCU puede operar de manera satisfactoria. La etapa de aislamiento, filtrado y amplificación se implementaron con el \emph{op-amp} CA3140. La etapa de aislamiento se realiza empleando dicho \emph{op-amp} como seguidor de voltaje, en la etapa de filtrado y amplificación se emplea un circuito RC como filtro \emph{pasa-bajas} con una frecuencia de corte ${f}_{c}=0.159\hertz$\footnote{Por simplicidad, esta frecuencia de corte es empleada en la etapa de filtrado de cada dispositivo CAS.} y el CI CA3140 configurado como amplificador con una ganancia ${G}_{a}=2$.
	
	\item Debido a que el sensor de OD entrega niveles de corriente que oscilan entre $50\nano\ampere$ y $110\nano\ampere$, se establece, para el convertidor de corriente a voltaje, una ganancia ${G}_{c}=1*{10}^{6}$, de esta manera se proporciona niveles de voltaje de $50\milli\volt$ a $110\milli\volt$, y para este rango de voltaje el dispositivo ADC del MCU puede operar de manera exitosa. La etapa de filtrado consta de un filtro activo pasa-bajas inversor.
	
	\item La etapa de aislamiento del sensor de temperatura consiste en el CI CA3140 con la configuración de seguidor de voltaje y en la etapa de filtrado y amplificación se emplea la misma configuración empleada para el sensor de pH para las respectivas etapas, aunque difiere en la ganancia de amplificación, la cual es ${G}_{a}=4$.
	
	\item La comunicación entre la RTU y la MTU se realiza a través de una interfaz serial RS-485. Dicha interfaz serial se implementa con el CI MAX489, sin embargo, debido a que para las PCs o Notebooks se halló que solo cuentan con interfaces seriales RS-232, fue necesario construir una pasarela RS-485/RS-232. Dicha pasarela se construyó utilizando los CIs MAX489 y MAX232. Basándose en la configuración actual del MCU, la velocidad máxima de transferencia posible que se halló para la interfaz serial fue de $38.4\kilo$bps.
	
	\item El software del MCU se desarrolló en el lenguaje de programación C. Este software se desarrolló en el IDE AVR Studio y se empleó la librería WinAVR que es un compilador de lenguaje C, ambas herramientas son específicamente para MCUs de la marca ATMEL.
	
	\item EL software de la MTU se desarrolló en el lenguaje de programación Java, el cual facilita el desarrollo de manera modular como se describe en el inciso~\ref{cap3:DSWMTU}.  Java permite que el software de la MTU sea desarrollado bajo el \emph{Modelo del Gestor}, con ello se logra un mejor desempeño a través de la programación de múltiples hilos (\emph{Multithreading}), en donde cada tarea de monitoreo se programa en un subproceso de ejecución que son gestionados por un proceso central. A través de un búfer sincronizado, Java permite solucionar el problema \emph{productor-consumidor} que se presenta al momento de compartir la interfaz serial entre los distintos subprocesos de monitoreo. El software de la MTU almacena registros de mediciones y estados digitales en una base de datos MySQL, y acepta solicitudes desde la aplicación Web para establecer salidas digitales.
	
	\item La aplicación Web fue desarrollada empleando el \emph{framework Yii}, el cual es un framework de PHP de alto rendimiento para aplicaciones Web 2.0. Para complementar la aplicación Web se utilizaron las extensiones (De Yii): Bootstrap, HighCharts y YiiBooster. También se utilizó la herramienta \emph{Ambiance} (\emph{jQuery Notification Plugin}) que es una herramienta de notificación basada en \emph{JQuery}. Las gráficas dinámicas fueron implementadas usando las extensiones \emph{YiiBooster}, \emph{HighCharts} (en su versión gratuita) y \emph{JQuery}\footnote{Se emplean solicitudes asíncronas \emph{AJAX}.}.
	
	\item Se describió detalladamente el diseño hardware y software, lo cual permite utilizar esta información en otros proyectos de investigación como: adquisición de datos, acondicionamiento de señales, filtrado, comunicación serial, aplicaciones que requieren múltiples procesos, bases de datos y aplicaciones Web.
	
	\item En general, el sistema de monitoreo del presente proyecto de tesis, da una pauta a seguir para implementar sistemas SCADA y de automatización remota. Cabe mencionar que este tipo de proyectos son fácilmente escalables, lo que quiere decir, que se pueden agregar al sistema múltiples RTUs, MTUs, bases de datos y aplicaciones Web. Por ende, se pueden gestionar múltiples plantas o procesos industriales en un mismo sistema sin comprometer el rendimiento del mismo, ya que el procesamiento se realiza de manera distribuida.
	
\end{itemize}

\section{Líneas futuras de investigación}

En base al desarrollo del presente proyecto de tesis y otros proyectos de investigación, se abre la posibilidad de evolucionar este proyecto de manera significativa, por lo que se proponen las siguientes posibilidades para trabajos futuros: 

\begin{itemize}
	\item Implementar en el MCU controles por realimentación como el control PID (\emph{Proporcional integral derivativo}), controladores de lógica difusa entre otros. Con esto se podrán controlar, desde un lugar remoto, variables cruciales en procesos, plantas o cualquier sistema que así lo requiera (Por ejemplo: pH, temperatura, presión, volumen y otras variables).
	
	\item Implementar alarmas o disparadores que indiquen un estado activo o inactivo, lo cual se podrá monitorear como entradas digitales. Igualmente, se podrán implementar activadores de dispositivos analógicos (Motores, ventiladores, ventanas y otros) o de un sistema en particular a través de señales digitales (TTL), dichas señales se pueden implementar a través de las salidas digitales que se detallan en el diseño de este proyecto de tesis.
	
	\item Mejorar el dispositivo CAS para el sensor de pH utilizando CIs de propósito industrial, con esto se podrá reducir el margen de error en las lecturas. Por ejemplo, se puede utilizar el CI LM4140A-1.0 de la marca \emph{National Semiconductor}, el cual proporciona un voltaje de referencia de baja caída y produce un voltaje preciso de $1.024\volt$ que puede ser utilizado como ${V}_{offset}$, desde luego con un arreglo divisor de voltaje. Esto reducirá las variaciones en ${V}_{offset}$ y por ende las mediciones serán consistentes.
	
	\item Basándose en la referencia \cite{Cap2Bib:PracticalScada}, las arquitecturas posibles de comunicación entre una RTU y la MTU que se pueden implementar utilizando radio módem son la de punto a punto y estaciones repetidoras. Dichas arquitecturas permiten abarcar distancias significativamente grandes entre la RTU y la MTU. En los enlaces punto a punto interactúan solo una RTU y una MTU, y generalmente consiste en sistemas con propagación en línea de vista (\emph{Line-of-sight propagation}). Los enlaces con estaciones repetidoras brindan la ventaja de gestionar RTUs que están fuera de la línea de vista del radio módem de la MTU y por ende a una distancia mucho mayor que la arquitectura punto a punto, gracias a esto, permite abarcar distancias entre regiones y estados.
	
	\item Actualmente debido a la gran demanda de la Internet, resulta conveniente implementar el protocolo de comunicación Modbus sobre TCP/IP. Con ello, se pueden utilizar estándares de redes LAN como Ethernet (Estándar IEEE 802.3) y Wi-Fi (Estándar IEEE 802.11) para la comunicación entre la RTU y la MTU en distancias cortas. Considerando que para una red interna o intranet la latencia es relativamente despreciable, es posible sustituir la interfaz serial RS-485 por cualquier estándar de red LAN.

	\item Se puede hacer un estudio para verificar si existe la posibilidad de usar la infraestructura de Internet que ofrece TELMEX al público en general, ya que TELMEX ofrece, al sector empresarial e industrial, una gamma de servicios de Internet dedicado, dichos servicios tienen un costo fuera del alcance de un usuario común (Por así decirlo). Dicho estudio proporcionará los rangos de latencias de propagación en la información de monitoreo y se podrá determinar que tipo de plantas o procesos industriales podrían ser monitoreados o automatizados bajo dicha infraestructura.
	
	\item En la actualidad, se puede implementar la RTU en MCUs que ofrecen módulos embebidos de comunicación Ethernet, tales como la familia de MCUs \emph{PIC32MX6/7} de la marca \emph{MICROCHIP}, los cuales soportan tasas de transferencia de datos de of $10\mega$bps (10-BaseT), $100\mega$bps (10/100 Base-T) y $1000\mega$bps ($1\giga$bps). En base a estos MCUs se derivan una gama de dispositivos y tarjetas de desarrollo para comunicación sobre Ethernet y Wi-Fi.
	
	\item De igual forma, se puede implementar la RTU en familias de dispositivos FPGA como: \emph{Virtex-7}, \emph{Spartan-6}, \emph{Kintex-7} entre otras. Dichas familias de FPGAs proporcionan herramientas para implementar interfaces Ethernet.
	
	\item Para la aplicación Web se pueden implementar módulos de notificación vía mensajes de texto y correos electrónicos. También es posible desarrollar módulos de reportes mensuales, semanales y diarios (según se requiera). Prácticamente es imposible determinar los límites de una aplicación Web, debido a la constante evolución del software libre y privativo. Con esto se abre una nueva línea de investigación en el ámbito industrial.
	
	\item Debido a las nuevas tendencias en tecnologías de la información, es posible desarrollar aplicaciones para dispositivos móviles, lo cual abre una nueva rama de investigación en lo que se refiere a usabilidad, seguridad y gestión de usuarios.
	
\end{itemize}

Como opinión personal, considero que la tendencia en tecnología se dirige hacia el mercado de dispositivos móviles y computación sobre la nube (\emph{Cloud computing}), por lo que esta área ofrece una inmensa oportunidad de innovación tecnológica.










